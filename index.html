<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RNDR Node Monitor</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-primary: #1a1a1a; --bg-secondary: #242424; --bg-tertiary: #2a2a2a;
            --text-primary: #ffffff; --text-secondary: #a0a0a0; --accent: #00d4ff;
            --success: #00ff88; --error: #ff3366; --warning: #ffaa00; --border: #333333;
        }
        body.light {
            --bg-primary: #ffffff; --bg-secondary: #f5f5f5; --bg-tertiary: #ebebeb;
            --text-primary: #1a1a1a; --text-secondary: #666666; --border: #dddddd;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--bg-primary); color: var(--text-primary);
            overflow: hidden; height: 100vh; display: flex; flex-direction: column;
        }
        .titlebar { height: 32px; background: var(--bg-secondary); display: flex; align-items: center; justify-content: space-between; padding: 0 12px; -webkit-app-region: drag; border-bottom: 1px solid var(--border); }
        .titlebar-title { font-size: 13px; font-weight: 500; }
        .titlebar-controls { display: flex; gap: 12px; -webkit-app-region: no-drag; }
        .titlebar-btn { width: 14px; height: 14px; border-radius: 50%; cursor: pointer; transition: opacity 0.2s; }
        .titlebar-btn:hover { opacity: 0.8; }
        .btn-minimize { background: #ffaa00; } .btn-maximize { background: #00ff88; } .btn-close { background: #ff3366; }
        .main-container { flex: 1; display: flex; overflow: hidden; }
        .sidebar { width: 220px; background: var(--bg-secondary); border-right: 1px solid var(--border); padding: 20px; overflow-y: auto; }
        .sidebar h3 { font-size: 11px; text-transform: uppercase; color: var(--text-secondary); margin-bottom: 12px; letter-spacing: 0.5px; }
        .node-list { list-style: none; }
        .node-item { padding: 10px; margin-bottom: 8px; background: var(--bg-tertiary); border-radius: 6px; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 10px; }
        .node-item:hover, .node-item.active { background: linear-gradient(135deg, var(--accent), #0099cc); color: #000; }
        .node-status { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
        .status-online { background: var(--success); }
        .status-offline { background: var(--error); animation: pulse 2s infinite; }
        .content { flex: 1; padding: 30px; overflow-y: auto; }
        .loading-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.9); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 1000; transition: opacity 0.3s; }
        .loading-overlay.hidden { opacity: 0; pointer-events: none; }
        .loading-spinner { width: 60px; height: 60px; border: 3px solid var(--bg-tertiary); border-top-color: var(--accent); border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 20px; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .loading-text { font-size: 14px; color: var(--text-secondary); margin-bottom: 10px; }
        .loading-progress { width: 300px; height: 4px; background: var(--bg-tertiary); border-radius: 2px; overflow: hidden; }
        .loading-progress-bar { height: 100%; background: var(--accent); transition: width 0.3s; }
        .dashboard-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .dashboard-title { font-size: 24px; font-weight: 300; }
        .header-controls { display: flex; gap: 10px; align-items: center; }
        .header-btn { padding: 8px 16px; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 6px; color: var(--text-primary); cursor: pointer; transition: all 0.2s; font-size: 13px; }
        .header-btn:hover { background: var(--accent); color: #000; border-color: var(--accent); }
        .status-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .status-card { background: var(--bg-secondary); padding: 20px; border-radius: 8px; border: 1px solid var(--border); }
        .status-card h4 { font-size: 12px; text-transform: uppercase; color: var(--text-secondary); margin-bottom: 10px; letter-spacing: 0.5px; }
        .status-indicator { display: flex; align-items: center; gap: 10px; font-size: 14px; }
        .status-dot { width: 12px; height: 12px; border-radius: 50%; }
        .status-dot.active { background: var(--success); animation: pulse 2s infinite; }
        .status-dot.inactive { background: var(--error); }
        .status-dot.warning { background: var(--warning); animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: var(--bg-secondary); padding: 20px; border-radius: 8px; border: 1px solid var(--border); }
        .stat-card h4 { font-size: 12px; text-transform: uppercase; color: var(--text-secondary); margin-bottom: 15px; letter-spacing: 0.5px; }
        .stat-value { font-size: 28px; font-weight: 300; margin-bottom: 8px; }
        .stat-label { font-size: 13px; color: var(--text-secondary); }
        .stat-breakdown { display: flex; gap: 20px; margin-top: 10px; }
        .stat-item { flex: 1; }
        .stat-item-value { font-size: 18px; font-weight: 400; }
        .stat-item-label { font-size: 11px; color: var(--text-secondary); text-transform: uppercase; margin-top: 4px; }
        .gpu-section, .log-section { margin-bottom: 30px; }
        .gpu-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .gpu-card { background: var(--bg-secondary); padding: 20px; border-radius: 8px; border: 1px solid var(--border); }
        .gpu-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .gpu-name { font-size: 14px; font-weight: 500; }
        .gpu-temp { font-size: 20px; font-weight: 300; }
        .gpu-metrics { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .metric { display: flex; flex-direction: column; }
        .metric-label { font-size: 11px; color: var(--text-secondary); text-transform: uppercase; margin-bottom: 4px; }
        .metric-value { font-size: 16px; }
        .progress-bar { width: 100%; height: 4px; background: var(--bg-tertiary); border-radius: 2px; margin-top: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--accent); transition: width 0.3s; }
        .log-section { background: var(--bg-secondary); padding: 20px; border-radius: 8px; border: 1px solid var(--border); height: 300px; display: flex; flex-direction: column; }
        .log-header { font-size: 12px; text-transform: uppercase; color: var(--text-secondary); margin-bottom: 15px; letter-spacing: 0.5px; flex-shrink: 0; }
        .log-entries { font-family: 'Courier New', monospace; font-size: 12px; line-height: 1.6; flex: 1; overflow-y: auto; }
        .log-entry { padding: 4px 0; border-bottom: 1px solid var(--border); word-wrap: break-word; }
        .log-entry:last-child { border-bottom: none; }
        .log-entry.success { color: var(--success); } .log-entry.error { color: var(--error); } .log-entry.warning { color: var(--warning); }
        .last-frame { display: flex; align-items: center; gap: 10px; font-size: 13px; color: var(--text-secondary); }
        .time-ago { color: var(--accent); }
        .switch { position: relative; display: inline-block; width: 40px; height: 22px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #333; transition: .4s; border-radius: 22px; }
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--accent); }
        input:checked + .slider:before { transform: translateX(18px); }
        .host-status { font-size: 12px; color: var(--text-secondary); margin-right: 15px; }
        .host-status a { color: var(--accent); text-decoration: none; }
        .host-status a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="titlebar">
        <div class="titlebar-title">RNDR Node Monitor</div>
        <div class="titlebar-controls">
            <div class="titlebar-btn btn-minimize" onclick="minimizeWindow()"></div>
            <div class="titlebar-btn btn-maximize" onclick="maximizeWindow()"></div>
            <div class="titlebar-btn btn-close" onclick="closeWindow()"></div>
        </div>
    </div>
    <div class="main-container">
        <div class="sidebar">
            <h3>Network Nodes</h3>
            <ul class="node-list" id="nodeList"></ul>
        </div>
        <div class="content">
            <div class="dashboard-header">
                <h1 class="dashboard-title" id="nodeTitle"></h1>
                <div class="header-controls">
                    <div class="host-status" id="hostStatus"></div>
                    <label for="hostingToggle" style="font-size: 13px; color: var(--text-secondary); margin-right: 8px;">Enable Hosting:</label>
                    <label class="switch">
                        <input type="checkbox" id="hostingToggle" onchange="toggleHosting(this.checked)">
                        <span class="slider"></span>
                    </label>
                    <button class="header-btn" onclick="openGitHub()">GitHub</button>
                    <button class="header-btn" onclick="openReportGenerator()">Generate Reports</button>
                    <button class="header-btn" onclick="toggleTheme()">Toggle Theme</button>
                    <button class="header-btn" id="openLogBtn" onclick="openLogFile()">Open Log File</button>
                </div>
            </div>
            <div class="status-grid">
                <div class="status-card">
                    <h4>Thermal Status</h4>
                    <div class="status-indicator">
                        <div class="status-dot" id="thermalStatus"></div>
                        <span id="thermalStatusText">Nominal</span>
                    </div>
                </div>
                <div class="status-card"><h4>RNDR Client</h4><div class="status-indicator"><div class="status-dot" id="rndrStatus"></div><span id="rndrStatusText">Checking...</span></div></div>
                <div class="status-card"><h4>RNDR Watchdog</h4><div class="status-indicator"><div class="status-dot" id="watchdogStatus"></div><span id="watchdogStatusText">Checking...</span></div></div>
                <div class="status-card"><h4>Last Frame</h4><div class="last-frame"><span id="lastFrameTime">No frames yet</span><span class="time-ago" id="timeAgo"></span></div></div>
            </div>
            <div class="stats-grid">
                 <div class="stat-card"><h4>24 Hour Frames</h4><div class="stat-value" id="dailyTotal">0</div><div class="stat-breakdown"><div class="stat-item"><div class="stat-item-value" id="dailySuccess" style="color: var(--success)">0</div><div class="stat-item-label">Successful</div></div><div class="stat-item"><div class="stat-item-value" id="dailyFailed" style="color: var(--error)">0</div><div class="stat-item-label">Failed</div></div></div></div>
                 <div class="stat-card"><h4>Epoch Frames (Live)</h4><div class="stat-value" id="epochTotal">0</div><div class="stat-breakdown"><div class="stat-item"><div class="stat-item-value" id="epochSuccess" style="color: var(--success)">0</div><div class="stat-item-label">Successful</div></div><div class="stat-item"><div class="stat-item-value" id="epochFailed" style="color: var(--error)">0</div><div class="stat-item-label">Failed</div></div></div><div class="stat-label" style="margin-top: 10px">Next epoch: <span id="nextEpoch">Calculating...</span></div></div>
                 <div class="stat-card"><h4>Lifetime Frames</h4><div class="stat-value" id="lifetimeTotal">0</div><div class="stat-breakdown"><div class="stat-item"><div class="stat-item-value" id="lifetimeSuccess" style="color: var(--success)">0</div><div class="stat-item-label">Successful</div></div><div class="stat-item"><div class="stat-item-value" id="lifetimeFailed" style="color: var(--error)">0</div><div class="stat-item-label">Failed</div></div></div></div>
            </div>
            <div class="gpu-section"><h4 style="font-size: 12px; text-transform: uppercase; color: var(--text-secondary); margin-bottom: 15px; letter-spacing: 0.5px;">GPU Status</h4><div class="gpu-grid" id="gpuGrid"></div></div>
            <div class="log-section"><div class="log-header">Recent Activity</div><div class="log-entries" id="logEntries"></div></div>
        </div>
    </div>
    <div class="loading-overlay" id="loadingOverlay"><div class="loading-spinner"></div><div class="loading-text" id="loadingText">Initializing...</div><div class="loading-progress"><div class="loading-progress-bar" id="loadingProgress" style="width: 0%"></div></div></div>

    <script>
        const { ipcRenderer, shell } = require('electron');
        const os = require('os');
        
        let selectedNodeName = 'local';
        let networkNodes = [];
        let localData = { stats: null, gpus: [], logEntries: [], processStatus: { rndr: false, watchdog: false } };
        const MAX_LOG_ENTRIES = 25;
        const localMachineName = os.hostname();
        
        window.addEventListener('DOMContentLoaded', () => {
            ipcRenderer.send('toggle-hosting', true);
            hostingToggle.checked = true;
            selectNode('local');
            updateNextEpoch();
            setInterval(updateNextEpoch, 60 * 60 * 1000);
        });
        
        function minimizeWindow() { ipcRenderer.send('minimize-window'); }
        function maximizeWindow() { ipcRenderer.send('maximize-window'); }
        function closeWindow() { ipcRenderer.send('close-window'); }
        function openLogFile() { ipcRenderer.send('open-log-file'); }
        function openReportGenerator() { ipcRenderer.send('open-report-generator'); }
        function openGitHub() { shell.openExternal('https://www.google.com/'); }
        function toggleTheme() { ipcRenderer.send('toggle-theme'); }
        ipcRenderer.on('theme-changed', (event, theme) => { document.body.className = theme === 'light' ? 'light' : ''; });
        
        ipcRenderer.on('loading-status', (event, status) => { document.getElementById('loadingText').textContent = status; });
        ipcRenderer.on('loading-progress', (event, progress) => { document.getElementById('loadingProgress').style.width = progress + '%'; });
        ipcRenderer.on('loading-complete', () => { setTimeout(() => { document.getElementById('loadingOverlay').classList.add('hidden'); }, 500); });

        ipcRenderer.on('process-status', (event, status) => {
            localData.processStatus = status;
            if (selectedNodeName === 'local') updateProcessStatusDisplay(status);
        });
        ipcRenderer.on('stats-update', (event, stats) => {
            localData.stats = stats;
            if (selectedNodeName === 'local') updateStatsDisplay(stats);
        });
        ipcRenderer.on('gpu-update', (event, gpus) => {
            localData.gpus = gpus;
            if (selectedNodeName === 'local') {
                displayGPUs(gpus);
                updateThermalStatus(gpus);
            }
        });
        ipcRenderer.on('initial-log-entries', (event, entries) => {
            localData.logEntries = entries.map(line => ({ text: line, className: getLogEntryClass(line) }));
            if (selectedNodeName === 'local') displayLogEntries(localData.logEntries);
        });
        ipcRenderer.on('log-line', (event, line) => {
            if (line.trim()) {
                localData.logEntries.unshift({ text: line, className: getLogEntryClass(line) });
                if (localData.logEntries.length > MAX_LOG_ENTRIES) localData.logEntries.pop();
                if (selectedNodeName === 'local') displayLogEntries(localData.logEntries);
            }
        });

        setInterval(() => {
            let lastFrameTime = null;
            if (selectedNodeName === 'local' && localData.stats) {
                lastFrameTime = localData.stats.lastFrameTime;
            } else if (selectedNodeName !== 'local') {
                const node = networkNodes.find(n => n.name === selectedNodeName);
                if (node && node.data && node.data.stats) {
                    lastFrameTime = node.data.stats.lastFrameTime;
                }
            }
            if (lastFrameTime) {
                updateTimeAgo(new Date(lastFrameTime));
            }
        }, 60000);

        ipcRenderer.on('network-nodes-update', (event, nodes) => {
            networkNodes = nodes;
            updateNodeList();
            if (selectedNodeName !== 'local') {
                const updatedNodeData = networkNodes.find(n => n.name === selectedNodeName);
                displayNodeData(selectedNodeName, updatedNodeData ? updatedNodeData.data : null);
            }
        });

        function updateNodeList() {
            const nodeList = document.getElementById('nodeList');
            const localNodeHTML = `<li class="node-item ${selectedNodeName === 'local' ? 'active' : ''}" onclick="selectNode('local')"><div class="node-status status-online"></div><span>${localMachineName} (Local)</span></li>`;
            
            const remoteNodesHTML = networkNodes.map(node => {
                const statusClass = node.data ? 'status-online' : 'status-offline';
                return `<li class="node-item ${selectedNodeName === node.name ? 'active' : ''}" onclick="selectNode('${node.name}')"><div class="node-status ${statusClass}"></div><span>${node.name}</span></li>`;
            }).join('');

            nodeList.innerHTML = localNodeHTML + remoteNodesHTML;
        }

        function selectNode(nodeName) {
            selectedNodeName = nodeName;
            updateNodeList();
            
            if (nodeName === 'local') {
                displayNodeData(localMachineName, localData);
            } else {
                const node = networkNodes.find(n => n.name === nodeName);
                displayNodeData(node.name, node ? node.data : null);
            }
        }

        function displayNodeData(nodeName, data) {
            document.getElementById('nodeTitle').textContent = nodeName;
            document.getElementById('openLogBtn').style.display = (nodeName === localMachineName) ? 'inline-block' : 'none';

            if (!data) {
                const nodeItem = Array.from(document.querySelectorAll('.node-item')).find(item => item.textContent.includes(nodeName));
                if (nodeItem) {
                    const statusDot = nodeItem.querySelector('.node-status');
                    if (statusDot) statusDot.className = 'node-status status-offline';
                }
                return;
            }

            updateStatsDisplay(data.stats);
            updateProcessStatusDisplay(data.processStatus || { rndr: data.rndrStatus, watchdog: data.watchdogStatus });
            
            const gpus = data.gpus || data.gpuInfo;
            updateThermalStatus(gpus);
            displayGPUs(gpus);
            
            const logs = data.logEntries || (data.recentLogs ? data.recentLogs.map(line => ({ text: line, className: getLogEntryClass(line) })) : []);
            displayLogEntries(logs);
        }
        
        function updateProcessStatusDisplay(status) {
            const update = (dotId, textId, isActive) => {
                document.getElementById(dotId).className = `status-dot ${isActive ? 'active' : 'inactive'}`;
                document.getElementById(textId).textContent = isActive ? 'Running' : 'Stopped';
            };
            update('rndrStatus', 'rndrStatusText', status.rndr);
            update('watchdogStatus', 'watchdogStatusText', status.watchdog);
        }

        function updateThermalStatus(gpus) {
            const thermalDot = document.getElementById('thermalStatus');
            const thermalText = document.getElementById('thermalStatusText');
            if (!gpus || gpus.length === 0) {
                thermalDot.className = 'status-dot';
                thermalText.textContent = 'N/A';
                return;
            }
            const isAnyGpuThrottling = gpus.some(gpu => gpu.isThrottling);
            if (isAnyGpuThrottling) {
                thermalDot.className = 'status-dot warning';
                thermalText.textContent = 'HW Throttling Active';
            } else {
                thermalDot.className = 'status-dot active';
                thermalText.textContent = 'Nominal';
            }
        }

        function updateStatsDisplay(stats) {
            const set = (id, val) => { document.getElementById(id).textContent = val; };
            if (!stats) {
                ['dailyTotal', 'dailySuccess', 'dailyFailed', 'epochTotal', 'epochSuccess', 'epochFailed', 'lifetimeTotal', 'lifetimeSuccess', 'lifetimeFailed'].forEach(id => set(id, 'N/A'));
                set('lastFrameTime', 'Offline');
                set('timeAgo', '');
                return;
            }
            set('dailyTotal', stats.dailyFrames.successful + stats.dailyFrames.failed);
            set('dailySuccess', stats.dailyFrames.successful);
            set('dailyFailed', stats.dailyFrames.failed);
            set('epochTotal', (stats.epochFrames) ? stats.epochFrames.successful + stats.epochFrames.failed : 'N/A');
            set('epochSuccess', (stats.epochFrames) ? stats.epochFrames.successful : 'N/A');
            set('epochFailed', (stats.epochFrames) ? stats.epochFrames.failed : 'N/A');
            set('lifetimeTotal', stats.lifetimeFrames.successful + stats.lifetimeFrames.failed);
            set('lifetimeSuccess', stats.lifetimeFrames.successful);
            set('lifetimeFailed', stats.lifetimeFrames.failed);
            if (stats.lastFrameTime) {
                const frameTime = new Date(stats.lastFrameTime);
                document.getElementById('lastFrameTime').textContent = frameTime.toLocaleString();
                updateTimeAgo(frameTime);
            } else {
                 document.getElementById('lastFrameTime').textContent = 'No frames yet';
                 document.getElementById('timeAgo').textContent = '';
            }
        }
        
        function displayGPUs(gpus) {
            const gpuGrid = document.getElementById('gpuGrid');
            if (!gpus || gpus.length === 0) {
                gpuGrid.innerHTML = `<div class="gpu-card"><div class="gpu-name">No GPU data available</div></div>`;
                return;
            }
            gpuGrid.innerHTML = gpus.map(gpu => `
                <div class="gpu-card">
                    <div class="gpu-header">
                        <div class="gpu-name">GPU ${gpu.index}: ${gpu.name}</div>
                        <div class="gpu-temp">${gpu.temperature}Â°C / ${gpu.pState}</div>
                    </div>
                    <div class="gpu-metrics">
                        <div class="metric"><div class="metric-label">GPU Usage</div><div class="metric-value">${gpu.gpuUtilization}%</div><div class="progress-bar"><div class="progress-fill" style="width: ${gpu.gpuUtilization}%"></div></div></div>
                        <div class="metric"><div class="metric-label">Memory Usage</div><div class="metric-value">${gpu.memoryUsedGB} / ${gpu.memoryTotalGB} GB</div><div class="progress-bar"><div class="progress-fill" style="width: ${gpu.memoryUtilization}%"></div></div></div>
                    </div>
                </div>`).join('');
        }
        
        function displayLogEntries(entries) {
            const logEl = document.getElementById('logEntries');
            if (!entries || entries.length === 0) {
                logEl.innerHTML = `<div style="color: var(--text-secondary);">No log entries available.</div>`;
                return;
            }
            logEl.innerHTML = entries.map(entry => `<div class="${entry.className}">${entry.text}</div>`).join('');
        }
        
        function getLogEntryClass(line) {
            if (line.includes('job completed successfully')) return 'log-entry success';
            if (line.includes('failed') || line.includes('ERROR')) return 'log-entry error';
            if (line.includes('WARNING')) return 'log-entry warning';
            return 'log-entry';
        }

        function updateTimeAgo(lastTime) {
            const diff = new Date() - lastTime;
            const hours = Math.floor(diff / 3600000);
            const minutes = Math.floor((diff % 3600000) / 60000);
            document.getElementById('timeAgo').textContent = hours > 0 ? `(${hours}h ${minutes}m ago)` : `(${minutes}m ago)`;
        }

        function updateNextEpoch() {
            const anchorTime = Date.UTC(2025, 7, 26, 23, 17, 23);
            const epochDuration = 7 * 24 * 60 * 60 * 1000;
            const now = Date.now();
            const timeSinceAnchor = now - anchorTime;
            const epochsSinceAnchor = Math.floor(timeSinceAnchor / epochDuration);
            const nextEpochTime = new Date(anchorTime + ((epochsSinceAnchor + 1) * epochDuration));
            const diff = nextEpochTime - now;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            document.getElementById('nextEpoch').textContent = `${days}d ${hours}h`;
        }

        const hostingToggle = document.getElementById('hostingToggle');
        function toggleHosting(isEnabled) {
            ipcRenderer.send('toggle-hosting', isEnabled);
        }
        ipcRenderer.on('hosting-enabled-updated', (event, isEnabled) => {
            hostingToggle.checked = isEnabled;
        });
        ipcRenderer.on('hosting-status-update', (event, { currentHostName }) => {
            const statusEl = document.getElementById('hostStatus');
            if (currentHostName) {
                const url = `http://localhost:34568`;
                statusEl.innerHTML = `Web host: <strong>${currentHostName}</strong> at <a href="#" onclick="shell.openExternal('${url}')">${url}</a>`;
            } else {
                statusEl.textContent = 'No web host active.';
            }
        });
    </script>
</body>
</html>