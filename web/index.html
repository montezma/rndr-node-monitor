<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RNDR Node Monitor - Web</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-primary: #1a1a1a; --bg-secondary: #242424; --bg-tertiary: #2a2a2a;
            --text-primary: #ffffff; --text-secondary: #a0a0a0; --accent: #00d4ff;
            --success: #00ff88; --error: #ff3366; --warning: #ffaa00; --border: #333333;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--bg-primary); color: var(--text-primary);
            overflow: hidden; height: 100vh; display: flex; flex-direction: column;
        }
        .titlebar { height: 32px; background: var(--bg-secondary); display: flex; align-items: center; justify-content: space-between; padding: 0 12px; border-bottom: 1px solid var(--border); }
        .titlebar-title { font-size: 13px; font-weight: 500; }
        .main-container { flex: 1; display: flex; overflow: hidden; }
        .sidebar { width: 220px; background: var(--bg-secondary); border-right: 1px solid var(--border); padding: 20px; overflow-y: auto; flex-shrink: 0; }
        .sidebar h3 { font-size: 11px; text-transform: uppercase; color: var(--text-secondary); margin-bottom: 12px; letter-spacing: 0.5px; }
        .node-list { list-style: none; }
        .node-item { padding: 10px; margin-bottom: 8px; background: var(--bg-tertiary); border-radius: 6px; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 10px; }
        .node-item:hover, .node-item.active { background: linear-gradient(135deg, var(--accent), #0099cc); color: #000; }
        .node-status { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
        .status-online { background: var(--success); }
        .status-offline { background: var(--error); animation: pulse 2s infinite; }
        .content { flex: 1; padding: 30px; overflow-y: auto; }
        .dashboard-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .dashboard-title { font-size: 24px; font-weight: 300; }
        .status-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .status-card { background: var(--bg-secondary); padding: 20px; border-radius: 8px; border: 1px solid var(--border); }
        .status-card h4 { font-size: 12px; text-transform: uppercase; color: var(--text-secondary); margin-bottom: 10px; letter-spacing: 0.5px; }
        .status-indicator { display: flex; align-items: center; gap: 10px; font-size: 14px; }
        .status-dot { width: 12px; height: 12px; border-radius: 50%; }
        .status-dot.active { background: var(--success); animation: pulse 2s infinite; }
        .status-dot.inactive { background: var(--error); }
        .status-dot.warning { background: var(--warning); animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: var(--bg-secondary); padding: 20px; border-radius: 8px; border: 1px solid var(--border); }
        .stat-card h4 { font-size: 12px; text-transform: uppercase; color: var(--text-secondary); margin-bottom: 15px; letter-spacing: 0.5px; }
        .stat-value { font-size: 28px; font-weight: 300; margin-bottom: 8px; }
        .stat-label { font-size: 13px; color: var(--text-secondary); }
        .stat-breakdown { display: flex; gap: 20px; margin-top: 10px; }
        .stat-item { flex: 1; }
        .stat-item-value { font-size: 18px; font-weight: 400; }
        .stat-item-label { font-size: 11px; color: var(--text-secondary); text-transform: uppercase; margin-top: 4px; }
        .gpu-section, .log-section { margin-bottom: 30px; }
        .gpu-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .gpu-card { background: var(--bg-secondary); padding: 20px; border-radius: 8px; border: 1px solid var(--border); }
        .gpu-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .gpu-name { font-size: 14px; font-weight: 500; }
        .gpu-temp { font-size: 20px; font-weight: 300; }
        .gpu-metrics { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .metric { display: flex; flex-direction: column; }
        .metric-label { font-size: 11px; color: var(--text-secondary); text-transform: uppercase; margin-bottom: 4px; }
        .metric-value { font-size: 16px; }
        .progress-bar { width: 100%; height: 4px; background: var(--bg-tertiary); border-radius: 2px; margin-top: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--accent); transition: width 0.3s; }
        .log-section { background: var(--bg-secondary); padding: 20px; border-radius: 8px; border: 1px solid var(--border); height: 300px; display: flex; flex-direction: column; }
        .log-header { font-size: 12px; text-transform: uppercase; color: var(--text-secondary); margin-bottom: 15px; letter-spacing: 0.5px; flex-shrink: 0; }
        .log-entries { font-family: 'Courier New', monospace; font-size: 12px; line-height: 1.6; flex: 1; overflow-y: auto; }
        .log-entry { padding: 4px 0; border-bottom: 1px solid var(--border); word-wrap: break-word; }
        .log-entry:last-child { border-bottom: none; }
        .log-entry.success { color: var(--success); } .log-entry.error { color: var(--error); } .log-entry.warning { color: var(--warning); }
        .last-frame { display: flex; align-items: center; gap: 10px; font-size: 13px; color: var(--text-secondary); }
        .time-ago { color: var(--accent); }
    </style>
</head>
<body>
    <div class="titlebar">
        <div class="titlebar-title">RNDR Node Monitor - Web Interface</div>
    </div>
    <div class="main-container">
        <div class="sidebar">
            <h3>Network Nodes</h3>
            <ul class="node-list" id="nodeList"></ul>
        </div>
        <div class="content">
            <div class="dashboard-header">
                <h1 class="dashboard-title" id="nodeTitle"></h1>
            </div>
            <div class="status-grid">
                <div class="status-card">
                    <h4>Thermal Status</h4>
                    <div class="status-indicator">
                        <div class="status-dot" id="thermalStatus"></div>
                        <span id="thermalStatusText">Nominal</span>
                    </div>
                </div>
                <div class="status-card"><h4>RNDR Client</h4><div class="status-indicator"><div class="status-dot" id="rndrStatus"></div><span id="rndrStatusText"></span></div></div>
                <div class="status-card"><h4>RNDR Watchdog</h4><div class="status-indicator"><div class="status-dot" id="watchdogStatus"></div><span id="watchdogStatusText"></span></div></div>
                <div class="status-card"><h4>Last Frame</h4><div class="last-frame"><span id="lastFrameTime"></span><span class="time-ago" id="timeAgo"></span></div></div>
            </div>
            <div class="stats-grid">
                 <div class="stat-card"><h4>24 Hour Frames</h4><div class="stat-value" id="dailyTotal">0</div><div class="stat-breakdown"><div class="stat-item"><div class="stat-item-value" id="dailySuccess" style="color: var(--success)">0</div><div class="stat-item-label">Successful</div></div><div class="stat-item"><div class="stat-item-value" id="dailyFailed" style="color: var(--error)">0</div><div class="stat-item-label">Failed</div></div></div></div>
                 <div class="stat-card"><h4>Epoch Frames</h4><div class="stat-value" id="epochTotal">0</div><div class="stat-breakdown"><div class="stat-item"><div class="stat-item-value" id="epochSuccess" style="color: var(--success)">0</div><div class="stat-item-label">Successful</div></div><div class="stat-item"><div class="stat-item-value" id="epochFailed" style="color: var(--error)">0</div><div class="stat-item-label">Failed</div></div></div><div class="stat-label" style="margin-top: 10px">Next epoch: <span id="nextEpoch">Calculating...</span></div></div>
                 <div class="stat-card"><h4>Lifetime Frames</h4><div class="stat-value" id="lifetimeTotal">0</div><div class="stat-breakdown"><div class="stat-item"><div class="stat-item-value" id="lifetimeSuccess" style="color: var(--success)">0</div><div class="stat-item-label">Successful</div></div><div class="stat-item"><div class="stat-item-value" id="lifetimeFailed" style="color: var(--error)">0</div><div class="stat-item-label">Failed</div></div></div></div>
            </div>
            <div class="gpu-section"><h4 style="font-size: 12px; text-transform: uppercase; color: var(--text-secondary); margin-bottom: 15px; letter-spacing: 0.5px;">GPU Status</h4><div class="gpu-grid" id="gpuGrid"></div></div>
            <div class="log-section"><div class="log-header">Recent Activity</div><div class="log-entries" id="logEntries"></div></div>
        </div>
    </div>
    <script src="/web-script.js"></script>
</body>
</html>